# 🟡 Pacman Game in C

Windows 콘솔 기반으로 제작된 클래식 팩맨 게임입니다. C 언어로 구현되었으며 MCI 사운드 시스템을 사용합니다.

## 📸 스크린샷

```
###############################################
#.....#................#................#....#
#.###.#.##############.#.##############.#.###.#
#o###.#................#................#.###o#
#.###.##################.##################.###.#
#.......#........C.......#.......R.....#.......#
#######.#.####.#########.#.#########.####.#.#######
      #.#.####.#         #         #.####.#.#
      #.#......#  ┌─────────────┐  #......#.#
#######.#.####.#  │ GHOST ZONE  │  #.####.#.#######
#.......#......#  │      P      │  #......#.......#
#.###.##########  │   G     O   │  ##########.###.#
#.###............  └─────────────┘  ............###.#
#.###.##########                   ##########.###.#
#.......#......#                   #......#.......#
#######.#.####.#                   #.####.#.#######
      #.#......#                   #......#.#
      #.#.####.#                   #.####.#.#
#######.#.####.#                   #.####.#.#######
#................#.......#.......#................#
#.###.#########.#.#####.#.#####.#.#########.###.#
#o..#...........#.......#.......#...........#..o#
###.#.#.#######.##################.#######.#.#.###
#.....#.#.......#........#........#.......#.#.....#
#.#######.####.##.######.#.######.##.####.#######.#
#.............#....#.....#.....#....#.............#
###############################################

SCORE: 12340     LIVES: 3     STAGE: 2
```

## 🎮 게임 특징

### 🎯 핵심 기능
- **클래식 팩맨 게임플레이**: 원작의 규칙과 메커니즘 구현
- **4마리 고스트**: 각각 다른 AI 패턴을 가진 고스트들
- **파워 쿠키**: 고스트를 잠시 무력화시키는 특수 아이템
- **보너스 과일**: 추가 점수를 위한 과일 아이템
- **다중 스테이지**: 무한히 계속되는 스테이지 시스템
- **하이스코어 시스템**: 최고 기록 저장 및 관리

### 🎵 사운드 시스템
- **배경음악**: 게임 상황에 맞는 동적 사운드
- **효과음**: 팩맨 이동, 고스트 상호작용, 아이템 획득 등
- **MCI 기반**: Windows MCI를 사용한 고품질 오디오

### 🎨 비주얼 시스템
- **ANSI 컬러**: 풍부한 색상 표현
- **더블 버퍼링**: 매끄러운 화면 전환
- **실시간 렌더링**: 60fps 게임 루프

## 🚀 빌드 및 실행

### 필요 조건
- **OS**: Windows 10/11
- **컴파일러**: MinGW-w64 GCC 또는 Visual Studio
- **라이브러리**: Windows API, winmm.lib

### 빌드 방법

#### MinGW-w64 사용:
```bash
gcc -o pacman.exe *.c -lwinmm
```

#### Visual Studio Code 사용:
1. VS Code에서 프로젝트 열기
2. `Ctrl+Shift+P` → "Tasks: Run Build Task"
3. "Build Pacman Game" 선택

#### 수동 빌드:
```bash
gcc -fdiagnostics-color=always -finput-charset=utf-8 -fexec-charset=cp949 -g \
    main.c game.c ghost.c pacman.c render.c sound.c common.c highscore.c maps.c \
    -o main.exe -lwinmm
```

### 실행
```bash
./main.exe
```

## 🎮 게임 조작법

### 🎯 기본 조작
- **화살표 키**: 팩맨 이동
- **P**: 게임 일시정지/재개
- **ESC**: 게임 종료 또는 메뉴로 돌아가기
- **스페이스바**: 디버그 모드 토글 (개발자용)

### 📱 메뉴 조작
- **위/아래 화살표**: 메뉴 항목 선택
- **Enter**: 선택 확정
- **ESC**: 이전 화면으로 돌아가기

## 🎯 게임 목표

### 🍪 쿠키 수집
- 맵의 모든 쿠키를 먹으면 다음 스테이지로 진행
- 일반 쿠키: 10점
- 파워 쿠키: 50점

### 👻 고스트 회피/처치
- **일반 상태**: 고스트와 접촉하면 생명 손실
- **파워 모드**: 파워 쿠키 섭취 후 고스트를 먹을 수 있음
  - 첫 번째 고스트: 200점
  - 두 번째 고스트: 400점
  - 세 번째 고스트: 800점
  - 네 번째 고스트: 1600점

### 🍓 보너스 아이템
- **체리**: 100점
- **딸기**: 300점
- **오렌지**: 500점
- **사과**: 700점
- **멜론**: 1000점

## 🤖 고스트 AI 시스템

### 🔴 빨간 고스트 (Blinky)
- **추격자**: 팩맨을 직접 추격
- **공격적**: 가장 빠르고 직접적인 경로 선택

### 🩷 분홍 고스트 (Pinky)
- **매복자**: 팩맨의 앞쪽을 노리는 전략
- **예측형**: 팩맨의 이동 방향을 예측하여 매복

### 💚 초록 고스트 (Inky)
- **변칙자**: 랜덤한 움직임
- **예측불가**: 때로는 추격, 때로는 도주

### 🧡 주황 고스트 (Clyde)
- **순찰자**: 특정 구역을 순찰
- **방어형**: 팩맨과 거리를 두려고 함

## 📊 게임 시스템

### 🏆 하이스코어 시스템
- **최대 10개** 기록 저장
- **플레이어 이름** 입력 (최대 12글자)
- **달성 스테이지** 및 **날짜** 기록
- **텍스트 파일** 저장 (`data/highscore.txt`)

### ⏰ 타이머 시스템
- **실시간 타이머**: 부드러운 애니메이션과 이동
- **고정 타이머**: 일관된 게임 로직
- **델타 타임**: 프레임 독립적인 게임플레이

### 🎵 동적 사운드
- **상황별 BGM**: 게임 상태에 따른 배경음악 변화
- **파워 모드**: 전용 파워업 음악
- **고스트 상태**: 고스트 상태에 따른 사운드 변화

## 📁 프로젝트 구조

```
pacman/
├── 📄 main.c              # 메인 게임 루프
├── 🎮 game.c/h            # 게임 로직 및 상태 관리
├── 👻 ghost.c/h           # 고스트 AI 시스템
├── 🟡 pacman.c/h          # 팩맨 로직 및 물리
├── 🎨 render.c/h          # 렌더링 시스템
├── 🎵 sound.c/h           # 사운드 시스템
├── 🗺️ maps.c/h            # 맵 데이터 및 관리
├── 🏆 highscore.c/h       # 하이스코어 시스템
├── 🛠️ common.c/h          # 공통 유틸리티
├── 🎨 colors.h            # ANSI 색상 정의
├── 📂 data/               # 게임 데이터
│   └── 🏆 highscore.txt   # 하이스코어 파일
└── 📂 sounds/             # 사운드 파일
    ├── 🎵 bgm.mp3
    ├── 🔊 game_start.wav
    ├── 👻 ghost_siren_lv1.mp3
    ├── ⚡ power_up.wav
    └── 💀 pacman_dying.mp3
```

## 🔧 기술적 특징

### 💻 프로그래밍 패턴
- **모듈화**: 기능별 파일 분리
- **캡슐화**: 데이터 은닉 및 인터페이스 제공
- **상태 기반**: 명확한 게임 상태 관리
- **이벤트 드리븐**: 입력 및 이벤트 기반 처리

### 🎯 성능 최적화
- **더블 버퍼링**: 화면 깜빡임 방지
- **델타 타임**: 프레임 독립적 로직
- **효율적 렌더링**: 변경된 부분만 업데이트
- **메모리 관리**: 정적 할당 및 스택 기반 관리

### 🛡️ 안정성
- **오류 처리**: 파일 I/O 및 메모리 접근 검증
- **경계 검사**: 배열 접근 및 좌표 검증
- **상태 검증**: 게임 상태 일관성 유지
- **디버그 로깅**: 개발 및 디버깅 지원

## 🐛 디버그 모드

### 🔧 활성화
게임 중 **스페이스바**를 눌러 디버그 모드를 토글할 수 있습니다.

### 📊 디버그 정보
- **팩맨 정보**: 위치, 방향, 생명, 다음 이동 위치
- **고스트 정보**: 각 고스트의 위치, 상태, 목표 위치
- **게임 상태**: 현재 상태, 타이머, 점수
- **맵 정보**: 남은 쿠키, 파워 쿠키, 보너스 과일
- **성능 정보**: FPS, 델타 타임

## 🎵 사운드 파일

게임을 완전히 즐기려면 다음 사운드 파일들이 `sounds/` 폴더에 있어야 합니다:

### 🎼 필수 사운드
```
sounds/
├── bgm.mp3                    # 메인 테마
├── game_start.wav             # 게임 시작
├── ghost_siren_lv1.mp3        # 일반 사이렌
├── ghost_siren_lv2.mp3        # 빠른 사이렌
├── power_up.wav               # 파워 모드
├── pacman_chasing_ghost.wav   # 고스트 추격
├── pacman_dying.mp3           # 팩맨 사망
├── ghost_back_to_base.wav     # 고스트 복귀
├── eating_fruit.wav           # 과일 섭취
└── pacman_gets_high_score.mp3 # 하이스코어 달성
```

## 🏆 하이스코어 포맷

`data/highscore.txt` 파일은 다음 형식을 사용합니다:

```
# Pacman High Scores (Top 10)
# Format: Name,Score,Stage,Date
PACMAN,10000,1,2025-09-05
PLAYER1,8500,3,2025-09-04
GHOST_HUNTER,7200,2,2025-09-03
```

---

**🎮 즐거운 팩맨 게임 되세요! 🟡👻**

*마지막 업데이트: 2025년 9월 5일*